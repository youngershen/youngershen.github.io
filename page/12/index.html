<!DOCTYPE html><html lang="English"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content="all about coding &amp;&amp; thinking"><meta name="keywords" content=""><meta name="author" content="Younger Shen,undefined"><meta name="copyright" content="Younger Shen"><title>younger shen's blog | CODING IN A DEEP</title><link rel="shortcut icon" href="/my-favicon.ico"><link rel="stylesheet" href="/css/index.css?version=1.5.6"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css?version=1.5.6"><link rel="dns-prefetch" href="https://cdn.staticfile.org"><link rel="dns-prefetch" href="https://cdn.bootcss.com"><link rel="dns-prefetch" href="https://creativecommons.org"><link rel="dns-prefetch" href="https://unpkg.com"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/gitment/style/default.min.css"><script src="https://cdn.jsdelivr.net/npm/gitment/dist/gitment.browser.min.js"></script><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  }
} </script></head><body><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div id="sidebar"><div class="author-info"><div class="author-info__avatar text-center"><img src="https://avatars1.githubusercontent.com/u/1480539?s=460&amp;v=4"></div><div class="author-info__name text-center">Younger Shen</div><div class="author-info__description text-center">all about coding &amp;&amp; thinking</div><div class="follow-button"><a href="https://github.com/youngershen" target="_blank">Follow Me</a></div><hr><div class="author-info-articles"><a class="author-info-articles__archives article-meta" href="/archives"><span class="pull-left">Articles</span><span class="pull-right">185</span></a><a class="author-info-articles__tags article-meta" href="/tags"><span class="pull-left">Tags</span><span class="pull-right">18</span></a><a class="author-info-articles__categories article-meta" href="/categories"><span class="pull-left">Categories</span><span class="pull-right">9</span></a></div></div></div><nav class="no-bg" id="nav" style="background-image: url(true)"><div id="page-header"><span class="pull-left"> <a id="site-name" href="/">CODING IN A DEEP</a></span><i class="fa fa-bars toggle-menu pull-right" aria-hidden="true"></i><span class="pull-right menus"><a class="site-page" href="/">Home</a><a class="site-page" href="/archives">Archives</a><a class="site-page" href="/tags">Tags</a><a class="site-page" href="/categories">Categories</a><a class="site-page" href="/about-me">About</a><a class="site-page" href="/projects">Projects</a></span></div><div id="site-info"><div id="site-title">CODING IN A DEEP</div><div id="site-sub-title">younger shen's blog</div><div id="site-social-icons"> <a class="social-icon" href="https://github.com/youngershen" target="_blank"><i class="fa fa-github"></i></a><a class="social-icon" href="https://twitter.com/youngershen" target="_blank"><i class="fa fa-twitter"></i></a><a class="social-icon" href="https://weibo.com/youngershen" target="_blank"><i class="fa fa-weibo"></i></a><a class="social-icon" href="https://facebook.com/youngershen" target="_blank"><i class="fa fa-facebook"></i></a></div></div></nav><div id="content-outer"><div class="layout" id="content-inner"><div class="recent-post-item article-container"><a class="article-title" href="/2018/07/15/工作日志-20180415/">工作日志-20181415</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2018-07-15</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/工作/">工作</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/工作日志/">工作日志</a></span><div class="content"><h2 id="摘要"><a href="#摘要" class="headerlink" title="摘要"></a>摘要</h2><ul>
<li>今天把 「HHBchain」的中心系统的测试用例搞了下，发现一个问题，已经和客户沟通了，明天开始开发 withdraw 相关的功能。</li>
</ul>
<h2 id="统计"><a href="#统计" class="headerlink" title="统计"></a>统计</h2><ul>
<li>工作时段 : 10:00 - 12:00, 14:00 - 19:00</li>
<li>代码 : 6 Commits </li>
<li>工作时长 : 7 Hours</li>
<li>读书 : 1 Hours</li>
<li>写作 : 0.1 Hour</li>
<li>练琴 : 1 Hour</li>
<li>发呆 : 0 Hour</li>
</ul>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2018/07/14/工作日志-20180714/">工作日志-20180714</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2018-07-14</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/工作/">工作</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/工作日志/">工作日志</a></span><div class="content"><h2 id="摘要"><a href="#摘要" class="headerlink" title="摘要"></a>摘要</h2><ul>
<li>继续开发「HHBchain」修复了一些逻辑问题，测试用例写一半了，希望明天可以完成测试用例</li>
</ul>
<h2 id="统计"><a href="#统计" class="headerlink" title="统计"></a>统计</h2><ul>
<li>工作时段 : 10:00 - 12:00, 14:00 - 19:00</li>
<li>代码 : 4 Commits </li>
<li>工作时长 : 7 Hours</li>
<li>读书 : 1 Hours</li>
<li>写作 : 0.1 Hour</li>
<li>练琴 : 1 Hour</li>
<li>发呆 : 0 Hour</li>
</ul>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2018/07/13/工作日志-20180713/">工作日志-20180713</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2018-07-13</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/工作/">工作</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/工作日志/">工作日志</a></span><div class="content"><h2 id="摘要"><a href="#摘要" class="headerlink" title="摘要"></a>摘要</h2><ul>
<li>今天继续开发 「HHBchain」，优化了中心系统的套利策略部分。</li>
</ul>
<h2 id="统计"><a href="#统计" class="headerlink" title="统计"></a>统计</h2><ul>
<li>工作时段 : 14:00 - 17:00</li>
<li>工作时长 : 3 Hours</li>
<li>代码 : 4 Commits</li>
<li>读书 : 1 Hours</li>
<li>写作 : 0.1 Hour</li>
<li>练琴 : 1 Hour</li>
<li>发呆 : 0 Hour</li>
</ul>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2018/07/11/工作日志-20180711/">工作日志-20180711</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2018-07-11</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/工作/">工作</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/工作日志/">工作日志</a></span><div class="content"><h2 id="摘要"><a href="#摘要" class="headerlink" title="摘要"></a>摘要</h2><ul>
<li>「HHBchain」的项目今天把信的交易策略功能写了，明天写测试用例并且测试。</li>
</ul>
<h2 id="统计"><a href="#统计" class="headerlink" title="统计"></a>统计</h2><ul>
<li>工作时段 : 10:00 - 12:00, 14:00 - 19:00</li>
<li>代码 : 4 Commits</li>
<li>工作时长 : 7 Hours</li>
<li>读书 : 1 Hours</li>
<li>写作 : 0.1 Hour</li>
<li>练琴 : 1 Hour</li>
<li>发呆 : 0 Hour</li>
</ul>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2018/07/10/工作日志-20180710/">工作日志-20180710</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2018-07-10</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/工作/">工作</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/工作日志/">工作日志</a></span><div class="content"><h2 id="摘要"><a href="#摘要" class="headerlink" title="摘要"></a>摘要</h2><ul>
<li><p>「HHBchain」还是在艰难开发中，今天把之前逻辑混乱的代码修复了一点，新功能还没有做，计划月底前完工。</p>
</li>
<li><p>「PunkCoder」这个主题今天开发了一点点，侧边栏的标签和分类栏目样式已经可以看了，不过还是做的很丑，不过 UI 之类的确实不是我的专业，主要把内容做好就可以了。</p>
</li>
</ul>
<h2 id="统计"><a href="#统计" class="headerlink" title="统计"></a>统计</h2><ul>
<li>工作时段 : 10:00 - 12:00, 14:00 - 19:00</li>
<li>工作时长 : 7 Hours</li>
<li>代码 : 6 Commits</li>
<li>读书 : 1 Hours</li>
<li>写作 : 0.1 Hour</li>
<li>练琴 : 1 Hour</li>
<li>发呆 : 0 Hour</li>
</ul>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2018/07/08/工作日志-20180708/">工作日志-20180708</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2018-07-08</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/工作/">工作</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/工作日志/">工作日志</a></span><div class="content"><h2 id="摘要"><a href="#摘要" class="headerlink" title="摘要"></a>摘要</h2><ul>
<li><p>和客户确认了 「HHBChain」的锁策略，明天开始开发。</p>
</li>
<li><p>今天开始开发博客主题，打算还是使用 wordpress 平台来搞博客，hhcms 段时间内是完不成了。</p>
</li>
</ul>
<h2 id="统计"><a href="#统计" class="headerlink" title="统计"></a>统计</h2><ul>
<li>工作时段 : 9:00 - 12:00, 14:00 - 19:00</li>
<li>工作时长 : 8 Hours</li>
<li>代码 : 4 Commits</li>
<li>读书 : 1 Hours</li>
<li>写作 : 0.1 Hour</li>
<li>练琴 : 1 Hour</li>
<li>发呆 : 0 Hour</li>
</ul>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2018/07/07/工作日志-20180707/">工作日志-20180707</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2018-07-07</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/工作/">工作</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/工作日志/">工作日志</a></span><div class="content"><h2 id="摘要"><a href="#摘要" class="headerlink" title="摘要"></a>摘要</h2><ul>
<li><p>「HHBchain」中使用了 CCXT 而且目前的项目是使用 celery 做的分布式，多个 CCXT 对象会在多个 celery worker 进程中被重复使用，这样就会存在 nonce 被重复的问题，所以这里必须对 CCXT 对象加锁。目前在研究锁方案。</p>
</li>
<li><p>「django-easy-validator」今天修复了几个小 BUG， 基本上已经能够使用了，最近要发一个新版本呢。</p>
</li>
</ul>
<h2 id="统计"><a href="#统计" class="headerlink" title="统计"></a>统计</h2><ul>
<li>工作时段 : 9:00 - 12:00, 14:00 - 19:00</li>
<li>工作时长 : 8 Hours</li>
<li>代码 : 4 Commits</li>
<li>读书 : 1 Hours</li>
<li>写作 : 0.1 Hour</li>
<li>练琴 : 1 Hour</li>
<li>发呆 : 0 Hour</li>
</ul>
<h2 id="备注"><a href="#备注" class="headerlink" title="备注"></a>备注</h2><p>关于锁的实现我想到了两种方案，一种是使用 python 自带的锁，每一种 CCXT 对象生成一个锁，各自锁各自的，这样在只有一个 celery worker 的时候是起作用的，因为在 fork 之前各个进程已经获取到锁了，但是在分布式的情况下就完全不起作用了。</p>
<p>原因是每个 celery woker 都会有自己的环境变量，所以锁没有共享，也就无法加锁， 这个时候只能使用 linux 提供的文件锁来解决这个问题，一个 CCXT exchange 对象一个文件，这样就可以解决在分布式环境下的锁问题了。</p>
<p>这种方案还有待测试，思路上是能够想通的，看明天的测试结果把。</p>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2018/07/06/工作日志-20180706/">工作日志-20180706</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2018-07-06</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/工作/">工作</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/工作日志/">工作日志</a></span><div class="content"><h2 id="摘要"><a href="#摘要" class="headerlink" title="摘要"></a>摘要</h2><ul>
<li><p>继续更新 「django-easy-validator」修复了文件 SIZE 的 BUG，并且优化了一些代码。</p>
</li>
<li><p>「HHBchain」的项目又遇到了一个比较严重的问题，需要再搞一套方案出来，问题是这样的，因为每个 CCXT Instance 会被多个 PRODUCT 公用，而系统的架构又是会存在并发的，所以计算出的 NONCE 可能会相同，导致请求失败，所以现在需要在每个 EXCHANGE 的 CCXT Instance 上加锁，来保证每次只有一个 CCXT 请求。</p>
</li>
</ul>
<h2 id="统计"><a href="#统计" class="headerlink" title="统计"></a>统计</h2><ul>
<li>工作时段 : 9:00 - 12:00, 14:00 - 19:00</li>
<li>工作时长 : 8 Hours</li>
<li>代码 : 4 Commits</li>
<li>读书 : 1 Hours</li>
<li>写作 : 0.1 Hour</li>
<li>练琴 : 1 Hour</li>
<li>发呆 : 0 Hour</li>
</ul>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2018/07/05/工作日志-20180705/">工作日志-20180704</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2018-07-05</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/工作/">工作</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/工作日志/">工作日志</a></span><div class="content"><h2 id="摘要"><a href="#摘要" class="headerlink" title="摘要"></a>摘要</h2><ul>
<li><p>按照上次讨论的结果为 「HHBchain」的客户重新画了搬砖部分的业务流程图和文字说明，客户确认之后开始开发。</p>
</li>
<li><p>继续开发 「django-easy-validator」这次增加了 SIZE 这个 RULE， 中间遇到了一些小问题，主要是针对不同类型的变量计算 size 的方法上，不过都已经逐一解决。</p>
</li>
</ul>
<p>## </p>
<ul>
<li>工作时段 : 9:00 - 12:00, 14:00 - 19:00</li>
<li>工作时长 : 8 Hours</li>
<li>代码 : 2 Commits</li>
<li>读书 : 1 Hours</li>
<li>写作 : 0.1 Hour</li>
<li>练琴 : 1 Hour</li>
<li>发呆 : 0 Hour</li>
</ul>
<h2 id="备注"><a href="#备注" class="headerlink" title="备注"></a>备注</h2><p>今天客户又有催促，不顾这个项目再怎么催促也赶不出来，我这边就索性慢慢做，已经超期两个月了，超期了两倍额工期，所以就算做到过年也没什么问题。</p>
<p>今天在计算上传文件的 size 时，除了一些意想不到的问题，主要是关于 BytesIO 和 StringIO 这两个内存文件的读写问题，稍后可以写一篇博客来具体说明。</p>
<p><a href="https://www.liaoxuefeng.com/wiki/0014316089557264a6b348958f449949df42a6d3a2e542c000/001431918785710e86a1a120ce04925bae155012c7fc71e000#0" target="_blank" rel="noopener">备忘</a></p>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2018/07/03/工作日志-20180703/">工作日志-20180703</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2018-07-03</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/工作/">工作</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/工作日志/">工作日志</a></span><div class="content"><h2 id="摘要"><a href="#摘要" class="headerlink" title="摘要"></a>摘要</h2><ul>
<li>「HHBchain」的客户又改了业务，需要重新出流程。</li>
</ul>
<h2 id="统计"><a href="#统计" class="headerlink" title="统计"></a>统计</h2><ul>
<li>工作时段 : 10:00 - 12:00, 14:00 - 19:00</li>
<li>工作时长 : 7 Hours</li>
<li>代码 : 2 Commits</li>
<li>读书 : 1 Hours</li>
<li>写作 : 0.1 Hour</li>
<li>练琴 : 1 Hour</li>
<li>发呆 : 0 Hour</li>
</ul>
</div><hr></div><nav id="pagination"><div class="pagination"><a class="extend prev" rel="prev" href="/page/11/"><i class="fa fa-chevron-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/11/">11</a><span class="page-number current">12</span><a class="page-number" href="/page/13/">13</a><span class="space">&hellip;</span><a class="page-number" href="/page/19/">19</a><a class="extend next" rel="next" href="/page/13/"><i class="fa fa-chevron-right"></i></a></div></nav></div></div><footer><div class="layout" id="footer"><div class="copyright">&copy;2013 - 2020 By Younger Shen</div><div class="framework-info"><span>Driven - </span><a href="http://hexo.io"><span>Hexo</span></a><span class="footer-separator">|</span><span>Theme - </span><a href="https://github.com/Molunerfinn/hexo-theme-melody"><span>Melody</span></a></div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><script src="/js/third-party/anime.min.js"></script><script src="/js/third-party/jquery.min.js"></script><script src="/js/third-party/jquery.fancybox.min.js"></script><script src="/js/third-party/velocity.min.js"></script><script src="/js/third-party/velocity.ui.min.js"></script><script src="/js/utils.js?version=1.5.6"></script><script src="/js/fancybox.js?version=1.5.6"></script><script src="/js/sidebar.js?version=1.5.6"></script><script src="/js/copy.js?version=1.5.6"></script><script src="/js/fireworks.js?version=1.5.6"></script><script src="/js/transition.js?version=1.5.6"></script><script src="/js/scroll.js?version=1.5.6"></script><script src="/js/head.js?version=1.5.6"></script></body></html>